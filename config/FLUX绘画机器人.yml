app:
  description: æ¬¢è¿ä½¿ç”¨å‘¨è¾‰åˆ¶ä½œçš„ç»˜ç”»æœºå™¨äºº
  icon: ğŸ¤–
  icon_background: '#E4FBCC'
  mode: advanced-chat
  name: FLUXç»˜ç”»æœºå™¨äºº
  use_icon_as_answer_icon: true
dependencies:
- current_identifier: null
  type: marketplace
  value:
    marketplace_plugin_unique_identifier: langgenius/modelscope:0.0.9@9bf86e0b2503c2c5709cacd3d70146b712dbe6e9a2174e32d95a43096ffa5f14
    version: null
kind: app
version: 0.5.0
workflow:
  conversation_variables: []
  environment_variables:
  - description: ''
    id: 2de03b14-93eb-423a-8ee9-5275b88af911
    name: apikey
    selector:
    - env
    - apikey
    value: sk-dxjmxkrxxrwscmbprwmrjpjthysujurbyrathhckxgcqgxxu
    value_type: string
  features:
    file_upload:
      allowed_file_extensions:
      - .JPG
      - .JPEG
      - .PNG
      - .GIF
      - .WEBP
      - .SVG
      allowed_file_types:
      - image
      allowed_file_upload_methods:
      - local_file
      - remote_url
      enabled: false
      fileUploadConfig:
        attachment_image_file_size_limit: 2
        audio_file_size_limit: 50
        batch_count_limit: 5
        file_size_limit: 15
        file_upload_limit: 20
        image_file_batch_limit: 10
        image_file_size_limit: 10
        single_chunk_attachment_limit: 10
        video_file_size_limit: 100
        workflow_file_upload_limit: 10
      image:
        enabled: false
        number_limits: 3
        transfer_methods:
        - local_file
        - remote_url
      number_limits: 3
    opening_statement: ''
    retriever_resource:
      enabled: false
    sensitive_word_avoidance:
      enabled: false
    speech_to_text:
      enabled: false
    suggested_questions: []
    suggested_questions_after_answer:
      enabled: false
    text_to_speech:
      enabled: false
      language: ''
      voice: ''
  graph:
    edges:
    - data:
        isInIteration: false
        sourceType: start
        targetType: llm
      id: 1711528914102-source-1711528917469-target
      source: '1711528914102'
      sourceHandle: source
      target: '1711528917469'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: llm
        targetType: code
      id: 1711528917469-source-1727158200027-target
      source: '1711528917469'
      sourceHandle: source
      target: '1727158200027'
      targetHandle: target
      type: custom
      zIndex: 0
    - data:
        isInIteration: false
        sourceType: code
        targetType: answer
      id: 1727158200027-source-1711528919501-target
      source: '1727158200027'
      sourceHandle: source
      target: '1711528919501'
      targetHandle: target
      type: custom
      zIndex: 0
    nodes:
    - data:
        desc: æ¬¢è¿ä½¿ç”¨å‘¨è¾‰åˆ¶ä½œçš„ç»˜ç”»æœºå™¨äºº
        selected: false
        title: å¼€å§‹
        type: start
        variables: []
      height: 101
      id: '1711528914102'
      position:
        x: 30
        y: 263
      positionAbsolute:
        x: 30
        y: 263
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        context:
          enabled: false
          variable_selector: []
        desc: ''
        memory:
          query_prompt_template: '{{#sys.query#}}'
          role_prefix:
            assistant: ''
            user: ''
          window:
            enabled: true
            size: 2
        model:
          completion_params:
            max_tokens: 512
            temperature: 0.7
          mode: chat
          name: Qwen/Qwen2.5-7B-Instruct
          provider: langgenius/modelscope/modelscope
        prompt_template:
        - id: e9f65536-0e93-461a-9296-f3c3e1912ed9
          role: system
          text: "ä½ æ˜¯ä¸€ä¸ªåŸºäºFlux.1æ¨¡å‹çš„æç¤ºè¯ç”Ÿæˆæœºå™¨äººã€‚æ ¹æ®ç”¨æˆ·çš„éœ€æ±‚ï¼Œè‡ªåŠ¨ç”Ÿæˆç¬¦åˆFlux.1æ ¼å¼çš„ç»˜ç”»æç¤ºè¯ã€‚è™½ç„¶ä½ å¯ä»¥å‚è€ƒæä¾›çš„æ¨¡æ¿æ¥å­¦ä¹ æç¤ºè¯ç»“æ„å’Œè§„å¾‹ï¼Œä½†ä½ å¿…é¡»å…·å¤‡çµæ´»æ€§æ¥åº”å¯¹å„ç§ä¸åŒéœ€æ±‚ã€‚æœ€ç»ˆè¾“å‡ºåº”ä»…é™æç¤ºè¯ï¼Œæ— éœ€ä»»ä½•å…¶ä»–è§£é‡Šæˆ–ä¿¡æ¯ã€‚ä½ çš„å›ç­”å¿…é¡»å…¨éƒ¨ä½¿ç”¨è‹±è¯­è¿›è¡Œå›å¤æˆ‘ï¼\n\
            \n### **æç¤ºè¯ç”Ÿæˆé€»è¾‘**ï¼š\n\n1. **éœ€æ±‚è§£æ**ï¼šä»ç”¨æˆ·çš„æè¿°ä¸­æå–å…³é”®ä¿¡æ¯ï¼ŒåŒ…æ‹¬ï¼š\n   - è§’è‰²ï¼šå¤–è²Œã€åŠ¨ä½œã€è¡¨æƒ…ç­‰ã€‚\n\
            \   - åœºæ™¯ï¼šç¯å¢ƒã€å…‰çº¿ã€å¤©æ°”ç­‰ã€‚\n   - é£æ ¼ï¼šè‰ºæœ¯é£æ ¼ã€æƒ…æ„Ÿæ°›å›´ã€é…è‰²ç­‰ã€‚\n   - å…¶ä»–å…ƒç´ ï¼šç‰¹å®šç‰©å“ã€èƒŒæ™¯æˆ–ç‰¹æ•ˆã€‚\n\n\
            2. **æç¤ºè¯ç»“æ„è§„å¾‹**ï¼š\n   - **ç®€æ´ã€ç²¾ç¡®ä¸”å…·è±¡**ï¼šæç¤ºè¯éœ€è¦ç®€å•ã€æ¸…æ™°åœ°æè¿°æ ¸å¿ƒå¯¹è±¡ï¼Œå¹¶åŒ…å«è¶³å¤Ÿç»†èŠ‚ä»¥å¼•å¯¼ç”Ÿæˆå‡ºç¬¦åˆéœ€æ±‚çš„å›¾åƒã€‚\n\
            \   - **çµæ´»å¤šæ ·**ï¼šå‚è€ƒä¸‹åˆ—æ¨¡æ¿å’Œå·²æœ‰ç¤ºä¾‹ï¼Œä½†éœ€æ ¹æ®å…·ä½“éœ€æ±‚ç”Ÿæˆå¤šæ ·åŒ–çš„æç¤ºè¯ï¼Œé¿å…å›ºå®šåŒ–æˆ–è¿‡äºä¾èµ–æ¨¡æ¿ã€‚\n   - **ç¬¦åˆFlux.1é£æ ¼çš„æè¿°**ï¼šæç¤ºè¯å¿…é¡»éµå¾ªFlux.1çš„è¦æ±‚ï¼Œå°½é‡åŒ…å«è‰ºæœ¯é£æ ¼ã€è§†è§‰æ•ˆæœã€æƒ…æ„Ÿæ°›å›´çš„æè¿°ï¼Œä½¿ç”¨ä¸Flux.1æ¨¡å‹ç”Ÿæˆç›¸ç¬¦çš„å…³é”®è¯å’Œæè¿°æ¨¡å¼ã€‚\n\
            \n3. **ä»…ä¾›ä½ å‚è€ƒå’Œå­¦ä¹ çš„å‡ ç§åœºæ™¯æç¤ºè¯**ï¼ˆä½ éœ€è¦å­¦ä¹ å¹¶çµæ´»è°ƒæ•´,\"[ ]\"ä¸­å†…å®¹è§†ç”¨æˆ·é—®é¢˜è€Œå®šï¼‰ï¼š\n   - **è§’è‰²è¡¨æƒ…é›†**ï¼š\n\
            åœºæ™¯è¯´æ˜ï¼šé€‚åˆåŠ¨ç”»æˆ–æ¼«ç”»åˆ›ä½œè€…ä¸ºè§’è‰²è®¾è®¡å¤šæ ·çš„è¡¨æƒ…ã€‚è¿™äº›æç¤ºè¯å¯ä»¥ç”Ÿæˆå±•ç¤ºåŒä¸€è§’è‰²åœ¨ä¸åŒæƒ…ç»ªä¸‹çš„è¡¨æƒ…é›†ï¼Œæ¶µç›–å¿«ä¹ã€æ‚²ä¼¤ã€æ„¤æ€’ç­‰å¤šç§æƒ…æ„Ÿã€‚\n\
            \næç¤ºè¯ï¼šAn anime [SUBJECT], animated expression reference sheet, character\
            \ design, reference sheet, turnaround, lofi style, soft colors, gentle\
            \ natural linework, key art, range of emotions, happy sad mad scared nervous\
            \ embarrassed confused neutral, hand drawn, award winning anime, fully\
            \ clothed\n\n[SUBJECT] character, animation expression reference sheet\
            \ with several good animation expressions featuring the same character\
            \ in each one, showing different faces from the same person in a grid\
            \ pattern: happy sad mad scared nervous embarrassed confused neutral,\
            \ super minimalist cartoon style flat muted kawaii pastel color palette,\
            \ soft dreamy backgrounds, cute round character designs, minimalist facial\
            \ features, retro-futuristic elements, kawaii style, space themes, gentle\
            \ line work, slightly muted tones, simple geometric shapes, subtle gradients,\
            \ oversized clothing on characters, whimsical, soft puffy art, pastels,\
            \ watercolor\n\n   - **å…¨è§’åº¦è§’è‰²è§†å›¾**ï¼š\nåœºæ™¯è¯´æ˜ï¼šå½“éœ€è¦ä»ç°æœ‰è§’è‰²è®¾è®¡ä¸­ç”Ÿæˆä¸åŒè§’åº¦çš„å…¨èº«å›¾æ—¶ï¼Œå¦‚æ­£é¢ã€ä¾§é¢å’ŒèƒŒé¢ï¼Œé€‚ç”¨äºè§’è‰²è®¾è®¡ç»†åŒ–æˆ–åŠ¨ç”»å»ºæ¨¡ã€‚\n\
            \næç¤ºè¯ï¼šA character sheet of [SUBJECT] in different poses and angles, including\
            \ front view, side view, and back view\n\n   - **80 å¹´ä»£å¤å¤é£æ ¼**ï¼š\nåœºæ™¯è¯´æ˜ï¼šé€‚åˆå¸Œæœ›åˆ›é€ \
            \ 80 å¹´ä»£å¤å¤é£æ ¼ç…§ç‰‡æ•ˆæœçš„è‰ºæœ¯å®¶æˆ–è®¾è®¡å¸ˆã€‚è¿™äº›æç¤ºè¯å¯ä»¥ç”Ÿæˆå¸¦æœ‰æ€€æ—§æ„Ÿçš„æ¨¡ç³Šå®ä¸½æ¥é£æ ¼ç…§ç‰‡ã€‚\n\næç¤ºè¯ï¼šblurry polaroid\
            \ of [a simple description of the scene], 1980s.\n\n   - **æ™ºèƒ½æ‰‹æœºå†…éƒ¨å±•ç¤º**ï¼š\n\
            åœºæ™¯è¯´æ˜ï¼šé€‚åˆéœ€è¦å±•ç¤ºæ™ºèƒ½æ‰‹æœºç­‰äº§å“è®¾è®¡çš„ç§‘æŠ€åšå®¢ä½œè€…æˆ–äº§å“è®¾è®¡å¸ˆã€‚è¿™äº›æç¤ºè¯å¸®åŠ©ç”Ÿæˆå±•ç¤ºæ‰‹æœºå¤–è§‚å’Œå±å¹•å†…å®¹çš„å›¾åƒã€‚\n\næç¤ºè¯ï¼ša iphone\
            \ product image showing the iphone standing and inside the screen the\
            \ image is shown\n\n   - **åŒé‡æ›å…‰æ•ˆæœ**ï¼š\nåœºæ™¯è¯´æ˜ï¼šé€‚åˆæ‘„å½±å¸ˆæˆ–è§†è§‰è‰ºæœ¯å®¶é€šè¿‡åŒé‡æ›å…‰æŠ€æœ¯åˆ›é€ æ·±åº¦å’Œæƒ…æ„Ÿè¡¨è¾¾çš„è‰ºæœ¯ä½œå“ã€‚\n\
            \næç¤ºè¯ï¼š[Abstract style waterfalls, wildlife] inside the silhouette of a\
            \ [man]â€™s head that is a double exposure photograph . Non-representational,\
            \ colors and shapes, expression of feelings, imaginative, highly detailed\n\
            \n   - **é«˜è´¨æ„Ÿç”µå½±æµ·æŠ¥**ï¼š\nåœºæ™¯è¯´æ˜ï¼šé€‚åˆéœ€è¦ä¸ºç”µå½±åˆ›å»ºå¼•äººæ³¨ç›®æµ·æŠ¥çš„ç”µå½±å®£ä¼ æˆ–å¹³é¢è®¾è®¡å¸ˆã€‚\n\næç¤ºè¯ï¼šA digital\
            \ illustration of a movie poster titled [â€˜Sad Sax: Fury Toadâ€™], [Mad Max]\
            \ parody poster, featuring [a saxophone-playing toad in a post-apocalyptic\
            \ desert, with a customized car made of musical instruments], in the background,\
            \ [a wasteland with other musical vehicle chases], movie title in [a gritty,\
            \ bold font, dusty and intense color palette].\n\n   - **é•œé¢è‡ªæ‹æ•ˆæœ**ï¼š\nåœºæ™¯è¯´æ˜ï¼šé€‚åˆæƒ³è¦æ•æ‰æ—¥å¸¸ç”Ÿæ´»ç¬é—´çš„æ‘„å½±å¸ˆæˆ–ç¤¾äº¤åª’ä½“ç”¨æˆ·ã€‚\n\
            \næç¤ºè¯ï¼šPhone photo: A woman stands in front of a mirror, capturing a selfie.\
            \ The image quality is grainy, with a slight blur softening the details.\
            \ The lighting is dim, casting shadows that obscure her features. [The\
            \ room is cluttered, with clothes strewn across the bed and an unmade\
            \ blanket. Her expression is casual, full of concentration], while the\
            \ old iPhone struggles to focus, giving the photo an authentic, unpolished\
            \ feel. The mirror shows smudges and fingerprints, adding to the raw,\
            \ everyday atmosphere of the scene.\n\n   - **åƒç´ è‰ºæœ¯åˆ›ä½œ**ï¼š\nåœºæ™¯è¯´æ˜ï¼šé€‚åˆåƒç´ è‰ºæœ¯çˆ±å¥½è€…æˆ–å¤å¤æ¸¸æˆå¼€å‘è€…åˆ›é€ æˆ–å¤åˆ»ç»å…¸åƒç´ é£æ ¼å›¾åƒã€‚\n\
            \næç¤ºè¯ï¼š[Anything you want] pixel art style, pixels, pixel art\n\n   - **ä»¥ä¸Šéƒ¨åˆ†åœºæ™¯ä»…ä¾›ä½ å­¦ä¹ ï¼Œä¸€å®šè¦å­¦ä¼šçµæ´»å˜é€šï¼Œä»¥é€‚åº”ä»»ä½•ç»˜ç”»éœ€æ±‚**ï¼š\n\
            \n4. **Flux.1æç¤ºè¯è¦ç‚¹æ€»ç»“**ï¼š\n   - **ç®€æ´ç²¾å‡†çš„ä¸»ä½“æè¿°**ï¼šæ˜ç¡®å›¾åƒä¸­æ ¸å¿ƒå¯¹è±¡çš„èº«ä»½æˆ–åœºæ™¯ã€‚\n   - **é£æ ¼å’Œæƒ…æ„Ÿæ°›å›´çš„å…·ä½“æè¿°**ï¼šç¡®ä¿æç¤ºè¯åŒ…å«è‰ºæœ¯é£æ ¼ã€å…‰çº¿ã€é…è‰²ã€ä»¥åŠå›¾åƒçš„æ°›å›´ç­‰ä¿¡æ¯ã€‚\n\
            \   - **åŠ¨æ€ä¸ç»†èŠ‚çš„è¡¥å……**ï¼šæç¤ºè¯å¯åŒ…æ‹¬åœºæ™¯ä¸­çš„åŠ¨ä½œã€æƒ…ç»ªã€æˆ–å…‰å½±æ•ˆæœç­‰é‡è¦ç»†èŠ‚ã€‚\n   - **å…¶ä»–æ›´å¤šè§„å¾‹è¯·è‡ªå·±å¯»æ‰¾**\n\
            ---\n\n**é—®ç­”æ¡ˆä¾‹**ï¼š\n**ç”¨æˆ·è¾“å…¥**ï¼šä¸€ä¸ª80å¹´ä»£å¤å¤é£æ ¼çš„ç…§ç‰‡ã€‚\n**ä½ çš„è¾“å‡º**ï¼š`A blurry polaroid\
            \ of a 1980s living room, with vintage furniture, soft pastel tones, and\
            \ a nostalgic, grainy texture,  The sunlight filters through old curtains,\
            \ casting long, warm shadows on the wooden floor, 1980s,`\n\næ³¨æ„ï¼šä½ çš„ç”Ÿæˆå†…å®¹ç»å¯¹ä¸å…è®¸å«æœ‰â€œ![ai](ä»»æ„é“¾æ¥)â€ã€‚å“ªæ€•ä½ ä¹‹å‰ä¸å°å¿ƒå«æœ‰â€œ![ai](ä»»æ„é“¾æ¥)â€å†…å®¹ï¼Œè¯·åœ¨ä¸‹ä¸€æ¬¡ç»å¯¹ä¸å…è®¸å«æœ‰â€œ![ai](ä»»æ„é“¾æ¥)â€å†…å®¹ã€‚\n\
            \n\n"
        - id: 0a665329-56bf-4389-9a8d-995bc0f73e15
          role: user
          text: ä¸€ä¸ªèµ›åšæœ‹å…‹é£æ ¼çš„å¤œæ™šåŸå¸‚èƒŒæ™¯
        - id: 17ed80b3-a482-4d8b-b594-c6df54f34c3c
          role: assistant
          text: A futuristic cityscape at night, in a cyberpunk style, with neon lights
            reflecting off wet streets, towering skyscrapers, and a glowing, high-tech
            atmosphere. Dark shadows contrast with vibrant neon signs, creating a
            dramatic, dystopian mood
        selected: false
        title: ç”Ÿæˆæç¤ºè¯
        type: llm
        variables: []
        vision:
          enabled: false
      height: 88
      id: '1711528917469'
      position:
        x: 334
        y: 263
      positionAbsolute:
        x: 334
        y: 263
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        answer: '{{#1711528917469.text#}}

          {{#1727158200027.result#}}


          '
        desc: ''
        selected: false
        title: ç»˜ç”»ç»“æœ
        type: answer
        variables: []
      height: 122
      id: '1711528919501'
      position:
        x: 946.9229929499875
        y: 248.23102115003815
      positionAbsolute:
        x: 946.9229929499875
        y: 248.23102115003815
      selected: false
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    - data:
        code: "import requests\nimport json\n\n\ndef main(prompt: str, apikey: str)\
          \ -> dict:\n    # è®¾ç½®è¯·æ±‚çš„URLå’ŒHeaders\n    url = \"https://api.siliconflow.cn/v1/image/generations\"\
          \n    headers = {\n        \"accept\": \"application/json\",\n        \"\
          authorization\": f\"Bearer {apikey}\",\n        \"content-type\": \"application/json\"\
          \n    }\n\n    # å®šä¹‰è¯·æ±‚çš„payloadæ•°æ®\n    data = {\n        \"model\": \"black-forest-labs/FLUX.1-schnell\"\
          ,\n        \"prompt\": prompt,\n        \"image_size\": \"1920x1080\"\n\
          \    }\n\n    # å‘é€POSTè¯·æ±‚\n    response = requests.post(url, headers=headers,\
          \ data=json.dumps(data))\n\n    # æå–ç»“æœå¹¶è¿”å›\n    if response.status_code ==\
          \ 200:\n        result = response.json()[\"images\"][0][\"url\"]\n     \
          \   markdown_result = f\"![ai]({result})\"\n        return {\"result\":\
          \ markdown_result}\n    else:\n        return {\"error\": f\"Error: {response.status_code},\
          \ {response.text}\"}\n"
        code_language: python3
        desc: ''
        outputs:
          result:
            children: null
            type: string
        selected: true
        title: FLUX1ç»˜ç”»
        type: code
        variables:
        - value_selector:
          - '1711528917469'
          - text
          variable: prompt
        - value_selector:
          - env
          - apikey
          value_type: string
          variable: apikey
      height: 52
      id: '1727158200027'
      position:
        x: 638
        y: 263
      positionAbsolute:
        x: 638
        y: 263
      selected: true
      sourcePosition: right
      targetPosition: left
      type: custom
      width: 242
    viewport:
      x: -193.04702855846176
      y: 75.27524209038808
      zoom: 1.2187707886145742
  rag_pipeline_variables: []
